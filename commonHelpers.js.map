{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getSearchPhotoAPI(userSymbol, page = 1)  {\n  const KEY_API = '42320428-e8ed9ab9e474091db19815d3a'\n\n  const listParameters = {\n    key: KEY_API,\n    q: userSymbol,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: 15,\n  }\n\n  try {\n    const queryString = new URLSearchParams(listParameters).toString();\n    const BASE_URL = await axios.get(`https://pixabay.com/api/?${queryString}`)\n    return BASE_URL.data\n  } catch (error) {\n    throw new Error('Failed to fetch data');\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n  formEL: document.querySelector('.js-search-form'),\n  listEL: document.querySelector('.gallery'),\n}\n\nexport function photoTemplate(data) {\n  const options = {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    animation: 250,\n    widthRatio: 0.9,\n    scaleImageToRatio: true,\n  }\n  const markup = data.hits\n    .map(data => {\n      return `<li class=\"gallery-item\"><a href=\"${data.webformatURL}\">\n          <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\"></a>\n          <div class=\"bloc-content\">\n          <p><b>Likes: </b>${data.likes}</p>\n          <p><b>Views: </b>${data.views}</p>\n          <p><b>Comments: </b>${data.comments}</p>\n          <p><b>Downloads: </b>${data.downloads}</p>\n          </div>\n          </li>`;\n    })\n  .join(\"\")\n  refs.listEL.insertAdjacentHTML('beforeend', markup);\n  const lightbox = new SimpleLightbox('.gallery a' , options);\n  lightbox.refresh();\n  refs.formEL.reset();\n}","import { getSearchPhotoAPI } from './js/pixabay-api.js'\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { photoTemplate } from './js/render-function.js';\n\n\nconst refs = {\n  formEL: document.querySelector('.js-search-form'),\n  loaderEl: document.querySelector('.loader'),\n  galleryList: document.querySelector('.gallery'),\n  buttonLoad: document.querySelector('.btn-load'),\n  loaderMore: document.querySelector('.loader-more')\n}\nlet lastSearchData = null;\nrefs.loaderEl.style.display = \"none\";\nrefs.loaderMore.style.display = \"none\";\nrefs.formEL.addEventListener('submit', async (e)=>{\n  e.preventDefault()\n  refs.galleryList.innerHTML = '';\n  const userSubmit = e.target.elements.query.value.trim();\n  refs.loaderEl.style.display = \"block\";\n  try {\n    const data = await getSearchPhotoAPI(userSubmit);\n    lastSearchData = userSubmit;\n    if (!data.hits.length){\n      iziToast.show({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        backgroundColor: 'red',\n        position: 'topRight'\n      })\n      refs.galleryList.innerHTML = '';\n    } else {\n      photoTemplate(data);\n      if (data.hits.length >= 15) {\n        refs.buttonLoad.style.display = \"block\"\n      }\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.show({\n      message: \"An error occurred while fetching images. Please try again later.\",\n      backgroundColor: 'red',\n      position: 'topRight'\n    });\n  }\n  finally {\n    refs.loaderEl.style.display = \"none\";\n  }\n  e.target.reset()\n})\nrefs.buttonLoad.addEventListener('click', async (e) => {\n  if (!lastSearchData) {\n    return;\n  }\n  const currentPage = Math.ceil(refs.galleryList.children.length / 15) + 1;\n  refs.loaderMore.style.display = \"block\";\n  try {\n    const data = await getSearchPhotoAPI(lastSearchData, currentPage);\n    photoTemplate(data);\n    if (data.hits.length >= 15) {\n      const cardHeight = refs.galleryList.firstElementChild.getBoundingClientRect().height;\n      window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n  } catch (error) {\n    refs.buttonLoad.style.display = \"none\"\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      backgroundColor: 'blue',\n      position: 'topRight'\n    });\n  } finally {\n    refs.loaderMore.style.display = \"none\";\n  }\n})"],"names":["getSearchPhotoAPI","userSymbol","page","listParameters","queryString","axios","refs","photoTemplate","data","options","markup","SimpleLightbox","lastSearchData","e","userSubmit","iziToast","error","currentPage","cardHeight"],"mappings":"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"}